<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>JZookeeperEdit by feldoh</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">JZookeeperEdit</h1>
      <h2 class="project-tagline">A simple tool for browsing and modifying zookeeper trees.</h2>
      <a href="https://github.com/feldoh/JZookeeperEdit" class="btn">View on GitHub</a>
      <a href="https://github.com/feldoh/JZookeeperEdit/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/feldoh/JZookeeperEdit/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="jzookeeperedit" class="anchor" href="#jzookeeperedit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JZookeeperEdit</h1>

<p>A simple tool for browsing and modifying zookeeper trees.</p>

<hr>

<h3>
<a id="why-does-this-tool-exist" class="anchor" href="#why-does-this-tool-exist" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why does this tool exist?</h3>

<p>Given that Zookeeper comes with ZKCli and many people have made nice web management systems like Netflix exhibitor you might wonder why you'd want a different browser. This tool's existence arises from 5 major frustrations with the existing options. Which really just boil down to a desire to edit JSON documents in-place and an issue with temporary Kafka consumers creating thousands of nodes that were never cleaned up. We also wanted to copy offsets between a collection of nodes and editing non-trivial data via the CLI was a pain. In particular though there were 5 pain points this tool targeted.</p>

<ol>
<li>Autogenerated node names can be a pain to navigate even with auto-complete.

<ul>
<li>JZookeeperEdit includes filtering via regex. Hiding all the auto-generated nodes makes seeing the small number of nodes you actually care about much easier. This also allows you to narrow your view to say all the nodes from a particular service making comparisons much easier. After all scrolling back and forth through 1000 nodes to compare some states is time consuming and prone to error.</li>
</ul>
</li>
<li>Editing data is a pain on a CLI and most of the web options don't support it.

<ul>
<li>JZookeeperEdit has a text box, maybe not the most fancy thing in the world but if you're trying to disable something at 2AM you'll be glad of a point and click.</li>
<li>Changing data in large nodes like JSON blobs can be challenging on the CLI.</li>
</ul>
</li>
<li>Deleting large numbers of nodes is both tricky and daunting.

<ul>
<li>If you want to keep your Zookeeper clean you may want to clear out old nodes or all nodes matching some pattern. Even command line gurus can find this hard with the tricky formatting of zkCli. JZookeeperEdit has a delete via regex option. If you find yourself wanting to clear out those 1000s of nodes an accidental random id generator created you'll spend a while on the normal zkCli and running it over thousands of nodes can take a surprisingly long time. In fact the first version of this tool was written while waiting for a bash script to do exactly that to complete. It took so long JZookeeperEdit ended up doing the job instead.</li>
<li>The delete via regex option has a preview so you can see exactly what you are about to delete. This has saved important nodes quite a few times.</li>
</ul>
</li>
<li>Alternatives may be hard to come by or hard to get installed.

<ul>
<li>Installing a web UI that the whole company can share is nice but getting that through your managers or systems team takes time. JZookeeperEdit is pre-packaged for most platforms and good to go so while your waiting for Exhibitor you can use JZookeeperEdit.</li>
<li> All the other options for local editors we found had been abandoned or were nigh on impossible to build.</li>
</ul>
</li>
<li>The built in zkCli is not nice for scripting.

<ul>
<li>The lack of a quiet mode makes it later hard with more unstructured node-content to actually extract the data you want. Short of writing a full blown parser that is. Plain old tools like sed and grep can do a lot but you spend so long fighting when you just wanted to ask your data a simple question. JZookeeperEdit's command line options are designed to compose well on the command line so you can easily combine calls to JZookeeperEdit with sed or grep then pass it right back in to JZookeeperEdit. Even with printwatches off it still puts cruft on stdout and the need to use printf to pass multiple commands to even be able to use printwatches is awkward.</li>
<li>JZookeeperEdit has a lot of sugar for common operations like:

<ul>
<li>Deleting all nodes under some other node.</li>
<li>Extracting a particular meta-field from a set of node.</li>
<li>Excluding certain children from a recursive delete.</li>
</ul>
</li>
</ul>
</li>
</ol>

<h1>
<a id="get-a-pre-built-binary" class="anchor" href="#get-a-pre-built-binary" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Get a pre-built Binary</h1>

<p>Pre-built binaries are available for most common platforms on <a href="https://bintray.com/feldoh/JZookeeperEdit/JZookeeperEdit">Bintray</a></p>

<h1>
<a id="using-the-cli" class="anchor" href="#using-the-cli" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using the CLI</h1>

<p>Zookeeper comes with a nice little command line tool for exploration. However for scripting, the metadata and the format can be a pain.
This tool comes with a limited (but more customisable in terms of output) cli of its own. The main aim here was to make a zkCli that was a little more unix-tools friendly.</p>

<p>You can see the current list of options by running the app with the <code>-h flag</code> e.g. If you are using the raw Jar then <code>java -jar JZookeeperEdit.jar -h</code>.</p>

<p>Several notable features include:</p>

<ul>
<li>The ability to chain ls calls. For example to get all children of the children of the root one could run
<code>java -jar JZookeeperEdit.jar -l -p -c localhost / | xargs java -jar JZookeeperEdit.jar -l -c localhost</code>
Naturally you can extend this via some grepping or awk commands or even asking questions like "do the children in one cluster have children in another".
Note that if you wish to chain calls you will need to use the <code>-p</code> flag to have it print the full paths.</li>
<li>The ability to extract particular elements from metadata and a more unix tools friendly meta output i.e.:
<code>java -jar JZookeeperEdit.jar -m -f getNumChildren -c localhost /</code>
Note that a full list of available accessors is available via <code>java -jar JZookeeperEdit.jar -a</code>
</li>
</ul>

<h1>
<a id="support--suggestions" class="anchor" href="#support--suggestions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Support &amp; Suggestions</h1>

<p>Having trouble with JZookeeperEdit? The main <a href="https://github.com/feldoh/JZookeeperEdit/blob/develop/README.md">readme</a> might have the answer. If you think you've found an issue or would like to suggest a feature feel free to raise an <a href="https://github.com/feldoh/JZookeeperEdit/issues">issue</a>. Suggestions are always appreciated. If you'd like a more freeform conversation or just to ask some questions or get some advice please join our <a href="https://gitter.im/JZookeeperEdit/Lobby">gitter</a> chatroom and ask away.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/feldoh/JZookeeperEdit">JZookeeperEdit</a> is maintained by <a href="https://github.com/feldoh">feldoh</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
